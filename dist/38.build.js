webpackJsonp([38],{199:function(t,i,a){"use strict";function e(t){a(589)}Object.defineProperty(i,"__esModule",{value:!0});var s=a(410),n=a(591),o=a(44),c=e,r=o(s.a,n.a,!1,c,"data-v-6a2529cf",null);i.default=r.exports},239:function(t,i,a){"use strict";i.a={packPerson:"./static/img/ic_pack_personal.png",packTeam:"./static/img/ic_pack_team.png",packDept:"./static/img/ic_pack_org.png",orgPubImg:"./static/img/ic_org_bg.png",orgImg:"./static/img/ic_org_logo.png",appIconDoctor:"./static/img/app_icon_doctor.png",appIconUser:"./static/img/app_icon.png",topBg:"./static/img/topbg.png",payWx:"./static/img/ic_pay_wechat.png",docMale:"./static/img/ic_doc_male.png",docFeMale:"./static/img/ic_doc_female.png",focusImg:"./static/img/ic_focused.png",unfocusImg:"./static/img/ic_unfocus.png",yuyueImg:"./static/img/ic_yuyue.png",reportImg:"./static/img/ic_report.png",askImg:"./static/img/ic_ask.png",serviceImg:"./static/img/ic_services.png",yuyueGrayImg:"./static/img/ic_yuyue_gray.png",askGrayImg:"./static/img/ic_ask_grey.png",serviceGrayImg:"./static/img/ic_services_grey.png",starImg:"./static/img/ic_rating_all.png",docRectMale:"./static/img/ic_rect_male.png",docRectFeMale:"./static/img/ic_rect_female.png",defaultAva:"./static/img/ic_default_ava.png",appointBg:"./static/img/ic_appoint_bg.png",rulePhoto:"./static/img/ic_rule.png",arrowDown:"./static/img/ic_arrow_down.png",arrowRight:"./static/img/arrow_right.png",arrowR:"./static/img/ic_arrow_right.png",home:"./static/img/home.png",news:"./static/img/news.png",service:"./static/img/service.png",mine:"./static/img/mine.png",doctor:"./static/img/doctor.png",mineBg:"./static/img/mine_bg.png",homeAppoint:"./static/img/home_appoint.png",homeDoctor:"./static/img/home_doctor.png",homeOnline:"./static/img/home_online.png",homeOrder:"./static/img/home_order.png",notice:"./static/img/notice.png",groupUser:"./static/img/ic_group_user.png",groupDoc:"./static/img/ic_group_doc.png",groupDocPatient:"./static/img/ic_group_doc_patient.png",shareImg:"./static/img/share.png",consultationHomeDefault:"./static/img/ic_consulation_home_default.png",consultationHomeSelected:"./static/img/ic_consulation_home_selected.png",consultationMineDefault:"./static/img/ic_consulation_mine_default.png",consultationMineSelected:"./static/img/ic_consulation_mine_selected.png",consultationSmallImg:"./static/img/ic_consultation_small_default.png",consultationBigImg:"./static/img/ic_consultation_big_default.png",consultationWant:"./static/img/ic_want.png",consultationWanted:"./static/img/ic_wanted.png",consultationPaySuccess:"./static/img/ic_sign_success.png",choose:"./static/img/choose.png",chosen:"./static/img/choosen.png",arrowWhiteRight:"./static/img/ic_arrow_right_white.png",consultationMineBg:"./static/img/ic_mine_bg.png",consultationEmpty:"./static/img/ic_empty.png",house_n:"./static/img/house_n.png",house_s:"./static/img/house_s.png",shopping_n:"./static/img/shopping_n.png",shopping_s:"./static/img/shopping_s.png",group_n:"./static/img/group_n.png",group_s:"./static/img/group_s.png",msg_n:"./static/img/msg_n.png",msg_s:"./static/img/msg_s.png",my_n:"./static/img/my_n.png",my_s:"./static/img/my_s.png",focusLookImg:"./static/img/look@2.png",unfocusLookImg:"./static/img/no_look@2.png",assistantHeadImg:"./static/img/assistant_head_img.png",msgTip:"./static/img/msg_tip.png",msgDot:"./static/img/msg_dot.png",systemMsg:"./static/img/system_msg.png",noticeMsg:"./static/img/notice_msg.png",familyDoc:"./static/img/family_doc.png"}},240:function(t,i,a){"use strict";i.a={props:{showBack:{default:!0},title:{default:"在线问诊"},showMenu:{default:!1}},methods:{back:function(){this.$router.go(-1)},menu:function(){this.$emit("confirm")}}}},241:function(t,i,a){"use strict";function e(t){a(242)}var s=a(240),n=a(244),o=a(44),c=e,r=o(s.a,n.a,!1,c,null,null);i.a=r.exports},242:function(t,i,a){var e=a(243);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);a(1)("67921c4f",e,!0,{})},243:function(t,i,a){i=t.exports=a(0)(!1),i.push([t.i,".header_box,.mint-header{background:#fff}.mint-header .mint-button .mintui-back{color:rgba(4,11,28,.8)}.mint-header-title{font-size:15px;color:#006dff}",""])},244:function(t,i,a){"use strict";var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"header_box"},[a("mt-header",{attrs:{fixed:"",title:t.title}},[t.showBack?a("mt-button",{attrs:{slot:"left",icon:"back"},nativeOn:{click:function(i){return t.back(i)}},slot:"left"}):t._e(),t._v(" "),t.showMenu?a("mt-button",{attrs:{slot:"right"},nativeOn:{click:function(i){return t.menu(i)}},slot:"right"},[t._v("确定")]):t._e()],1)],1)},s=[],n={render:e,staticRenderFns:s};i.a=n},410:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_vuex__=__webpack_require__(12),__WEBPACK_IMPORTED_MODULE_1__Header_vue__=__webpack_require__(241),__WEBPACK_IMPORTED_MODULE_2__static_js_imgmap_js__=__webpack_require__(239),_extends=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t};__webpack_exports__.a={data:function(){return{radio:"0",balance:"0",disabled:!1,price:this.$route.query.price,snapId:this.$route.query.snapId,orgId:this.$route.query.orgId,drId:this.$route.query.drId,servId:this.$route.query.servId,busiType:2000104,type:this.$route.query.type,docName:this.$route.query.docName}},components:{appHeader:__WEBPACK_IMPORTED_MODULE_1__Header_vue__.a},computed:_extends({},Object(__WEBPACK_IMPORTED_MODULE_0_vuex__.c)(["loginData"]),{servName:function(){var t=this.loginData.userObj,i=t.userName;return i||(i=t.nickName),i}}),methods:{getUserAccount:function(){var t=this,i={userId:this.loginData.userObj.userId.value};this.$store.dispatch("userAccount",i).then(function(i){i&&i.account?(t.balance=i.account.funds[0].money.value,parseInt(t.balance)<parseInt(t.price)&&(t.radio="1",t.disabled=!0)):(t.radio="1",t.disabled=!0)}).catch(function(i){t.$toast(i.message)})},radioVal:function(){this.price>=0&&this.submitOrder()},submitOrder:function(){var t=this,i=this;if(this.servId)this.$indicator.open(),i.wxPay();else{var a={userId:this.loginData.userObj.userId.value,snapId:this.snapId,goodsType:this.busiType,servName:this.servName,despIllness:"无",showDiary:1,showDynamic:1,orgId:this.orgId};this.$indicator.open(),this.$store.dispatch("orderSubmit",a).then(function(t){i.servId=t.servId.value,i.wxPay()}).catch(function(i){t.$toast(i.message),t.$indicator.close()})}},wxPay:function wxPay(){var _this3=this,vm=this,request={busiId:this.servId,busiType:this.busiType,desp:this.type,drId:this.drId,money:this.price,moneyRmb:this.price,orgId:this.orgId,tradeMode:"0"==this.radio?8101103:8101104,userId:this.loginData.userObj.userId.value};this.$store.dispatch("userConsume",request).then(function(data){if("1"==data.rtnCode){var json=data.data;json?(json=eval("("+json+")"),vm.invokeWx(json)):(_this3.$indicator.close(),vm.$router.push({path:"chatPayOk",query:{totalPrice:vm.price,docId:_this3.drId,orgId:_this3.orgId}}))}else _this3.$indicator.close(),_this3.$toast("网络异常，支付失败"),vm.$router.go(-1)}).catch(function(t){_this3.$toast(t.message)}).finally(function(){_this3.$indicator.close()})},onBridgeReady:function(t){var i=this;WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(t){"get_brand_wcpay_request:ok"==t.err_msg?i.$router.push({path:"chatPayOk",query:{totalPrice:i.price,docId:this.drId,orgId:this.orgId}}):this.$toast("支付失败")})},invokeWx:function(t){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.onBridgeReady(t),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.onBridgeReady(t)),document.attachEvent("onWeixinJSBridgeReady",this.onBridgeReady(t))):this.onBridgeReady(t)}},created:function(){document.title=this.type,this.loginData.userObj?this.getUserAccount():this.myUtils.wxLogin()}}},589:function(t,i,a){var e=a(590);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);a(1)("d44f393e",e,!0,{})},590:function(t,i,a){i=t.exports=a(0)(!1),i.push([t.i,"[data-v-6a2529cf] .el-radio__label{display:none}.main[data-v-6a2529cf]{background:#fff;margin-bottom:10px}.box[data-v-6a2529cf]{background:#fff;padding:18px 16px 18px 0;margin-left:16px}.border[data-v-6a2529cf]{border-bottom:1px solid hsla(0,0%,93%,.6)}.name[data-v-6a2529cf]{font-size:14px;color:#000}.name span[data-v-6a2529cf]{color:#666;margin-left:10px}.name img[data-v-6a2529cf]{width:22px;height:22px;margin-right:10px;position:relative;top:5px}.price[data-v-6a2529cf]{color:red;font-size:14px}.name span.price[data-v-6a2529cf]{margin-left:20px;color:red;font-size:14px}.state[data-v-6a2529cf]{color:#b3b3b3;font-size:14px}.state img[data-v-6a2529cf]{width:8px;height:14px;margin-left:5px;position:relative;top:3px}.title[data-v-6a2529cf]{font-size:12px;color:#b3b3b3;padding-left:16px;margin-bottom:10px}.btn_bottom[data-v-6a2529cf]{position:fixed;bottom:0;width:100%;background:#fff;padding:10px 16px;box-sizing:border-box}.next_btn[data-v-6a2529cf]{display:block;width:100%;height:40px;background:#0076ff;line-height:40px;text-align:center;color:#fff;font-size:16px;font-weight:600;border-radius:20px}.package_name[data-v-6a2529cf]{width:75%;height:20px;overflow:hidden;text-overflow:ellipsis;word-break:break-all;white-space:nowrap}",""])},591:function(t,i,a){"use strict";var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("div",{staticClass:"main"},[a("div",{staticClass:"box flex-b"},[a("div",{staticClass:"name package_name"},[t._v("在线咨询 "),a("span",[t._v(t._s(t.docName))])]),t._v(" "),a("div",{staticClass:"price"},[t._v("¥"+t._s(t.price))])])]),t._v(" "),a("div",{staticClass:"main"},[t._m(0),t._v(" "),a("div",{staticClass:"box flex-b"},[a("div",{staticClass:"name"},[t._v("总计")]),t._v(" "),a("div",{staticClass:"price"},[t._v("¥"+t._s(t.price))])])]),t._v(" "),a("p",{staticClass:"title"},[t._v("选择支付方式")]),t._v(" "),a("div",{staticClass:"main"},[a("div",{staticClass:"box border flex-b"},[a("div",{staticClass:"name"},[a("img",{attrs:{src:"/static/img/balance_pay_icon.png",alt:""}}),t._v("余额支付"),a("span",{staticClass:"price"},[t._v("¥ "+t._s(t.balance))])]),t._v(" "),a("el-radio",{attrs:{disabled:t.disabled,label:"0"},model:{value:t.radio,callback:function(i){t.radio=i},expression:"radio"}})],1),t._v(" "),a("div",{staticClass:"box flex-b"},[t._m(1),t._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(i){t.radio=i},expression:"radio"}})],1)]),t._v(" "),a("div",{staticClass:"btn_bottom flex-b"},[a("a",{staticClass:"next_btn",attrs:{href:"javascript:void(0);"},on:{click:t.radioVal}},[t._v("确认支付")])])])},s=[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"box border flex-b"},[a("div",{staticClass:"name"},[t._v("优惠券")]),t._v(" "),a("div",{staticClass:"state"},[t._v("无可用优惠券"),a("img",{attrs:{src:"/static/img/arrow_right.png",alt:""}})])])},function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"name"},[a("img",{attrs:{src:"/static/img/wx_pay_icon.png",alt:""}}),t._v("微信支付")])}],n={render:e,staticRenderFns:s};i.a=n}});
//# sourceMappingURL=38.build.js.map