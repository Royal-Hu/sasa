webpackJsonp([35],{177:function(t,i,e){"use strict";function a(t){e(468)}Object.defineProperty(i,"__esModule",{value:!0});var s=e(376),n=e(471),r=e(44),o=a,l=r(s.a,n.a,!1,o,"data-v-5d41b5f2",null);i.default=l.exports},240:function(t,i,e){"use strict";i.a={props:{showBack:{default:!0},title:{default:"在线问诊"},showMenu:{default:!1}},methods:{back:function(){this.$router.go(-1)},menu:function(){this.$emit("confirm")}}}},241:function(t,i,e){"use strict";function a(t){e(242)}var s=e(240),n=e(244),r=e(44),o=a,l=r(s.a,n.a,!1,o,null,null);i.a=l.exports},242:function(t,i,e){var a=e(243);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(1)("67921c4f",a,!0,{})},243:function(t,i,e){i=t.exports=e(0)(!1),i.push([t.i,".header_box,.mint-header{background:#fff}.mint-header .mint-button .mintui-back{color:rgba(4,11,28,.8)}.mint-header-title{font-size:15px;color:#006dff}",""])},244:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"header_box"},[e("mt-header",{attrs:{fixed:"",title:t.title}},[t.showBack?e("mt-button",{attrs:{slot:"left",icon:"back"},nativeOn:{click:function(i){return t.back(i)}},slot:"left"}):t._e(),t._v(" "),t.showMenu?e("mt-button",{attrs:{slot:"right"},nativeOn:{click:function(i){return t.menu(i)}},slot:"right"},[t._v("确定")]):t._e()],1)],1)},s=[],n={render:a,staticRenderFns:s};i.a=n},376:function(t,i,e){"use strict";var a=e(241),s=e(11),n=e(470);i.a={data:function(){return{options:["成年人","未成年人"],option:"成年人",idcard:"",name:"",sex:"",birth:"",age:"",nation:"",nationId:0,phone:"",address:"",guardianIdcard:"",guardianName:"",relation:"",relationId:0,popupVisible:!1,dateSlots:[],values:[],selectPosition:0,dialogType:1,teamId:this.$route.query.teamId,orgId:this.$route.query.orgId,registTp:this.$route.query.registTp}},components:{appHeader:a.a},computed:{phoneLabel:function(){return"成年人"==this.option?"请输入您的联系电话":"请输入监护人的联系电话"},addressLabel:function(){return"成年人"==this.option?"请输入您的住址":"请输入监护人的联系地址"}},methods:{next:function(){var t={registTp:this.registTp,orgId:this.orgId,teamId:this.teamId};if(!n.a.validateIdCard(this.idcard))return void this.$toast("请输入正确的身份证号");if(!this.name)return void this.$toast("请输入您的姓名");if(0==this.nationId)return void this.$toast("获取民族失败，请稍后再试");if("未成年人"==this.option){if(!n.a.validateIdCard(this.guardianIdcard))return void this.$toast("请输入正确的监护人身份证号");if(!this.guardianName)return void this.$toast("请输入监护人姓名");if(0==this.relationId)return void this.$toast("请选择您与签约人的关系");t.guardianRelation=this.relationId,t.guardianIdCard=this.guardianIdCard,t.guardianName=this.guardianName}if(!this.phone)return void this.$toast("请输入您的联系电话");if(!this.address)return void this.$toast("请输入您的联系地址");t.idCard=this.idcard,t.name=this.name,t.sex=this.sex,t.birth=this.birth,t.age=this.age,t.nationId=this.nationId,t.linkTel=this.phone,t.linkAddress=this.address,0!=this.relationId&&(t.guardianTel=this.phone,t.guardianAddress=this.address);var i=JSON.stringify(t);sessionStorage.setItem("params",i),this.$router.replace("pack")},onChange:function(t,i){var e=i[0],a=this.values.indexOf(e);a>=0&&(this.selectPosition=a)},confirm:function(){if(this.selectPosition>=0){if(1==this.dialogType){var t=this.$store.getters.nationList[this.selectPosition];this.nationId=t.dictId.value,this.nation=t.dictName}else if(2==this.dialogType){var i=this.$store.getters.relationList[this.selectPosition];this.relationId=i.dictId.value,this.relation=i.dictName}this.popupVisible=!1}},startShowDialog:function(t){this.values=this.initDictValues(t),this.dateSlots=[{flex:1,className:"slot1",textAlign:"center",values:this.values}],this.popupVisible=!0},showDialog:function(t){if(this.dialogType=t,1==t){var i=this.$store.getters.nationList;0==i.length?(this.$toast("正在获取数据"),this.requestNationData()):this.startShowDialog(i)}else if(2==t){var e=this.$store.getters.relationList;0==e.length?(this.$toast("正在获取数据"),this.requestRelationData()):this.startShowDialog(e)}},requestNationData:function(){var t=this,i={dictType:s.e},e=this;this.$store.dispatch("dictList",i).then(function(t){t.length>0&&(e.nationId=t[0].dictId.value,e.nation=t[0].dictName)}).catch(function(i){t.$toast(i.message)})},requestRelationData:function(){var t=this,i={dictType:s.f};this.$store.dispatch("dictList",i).then(function(){}).catch(function(i){t.$toast(i.message)})},initDictValues:function(t){var i=[];if(t.length>0)for(var e=0;e<t.length;e++)i[e]=t[e].dictName;return i},cardListener:function(t){if(this.idcard=t.target.value,n.a.validateIdCard(this.idcard)){this.birth=n.a.bir;var i=new Date,e=i.getFullYear()-n.a.birthday.getFullYear();(i.getMonth()<n.a.birthday.getMonth()||i.getMonth()==n.a.birthday.getMonth()&&i.getDate()<n.a.birthday.getDate())&&e--,this.age=e,1==n.a.sex?this.sex="男":this.sex="女"}}},created:function(){this.requestNationData(),this.requestRelationData()}}},468:function(t,i,e){var a=e(469);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(1)("41282ba5",a,!0,{})},469:function(t,i,e){i=t.exports=e(0)(!1),i.push([t.i,"",""])},470:function(t,i,e){"use strict";e.d(i,"a",function(){return a});var a={birthday:null,sex:1,bir:"",validateIdCard:function(t){var i={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};return""!==t&&(!1!==this.isCardNo(t)&&(!1!==this.checkProvince(t,i)&&(this.bir=this.checkBirthday(t),!!this.bir&&!1!==this.checkParity(t))))},isCardNo:function(t){return!1!==/(^\d{15}$)|(^\d{17}(\d|X|x)$)/.test(t)},checkProvince:function(t,i){return void 0!=i[t.substr(0,2)]},checkBirthday:function(t){var i,e=0,a=t.length;if("15"==a){var s=/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/,n=t.match(s),r=n[2],o=n[3],l=n[4];this.birthday=new Date("19"+r+"/"+o+"/"+l),this.verifyBirthday("19"+r,o,l,this.birthday)&&(i="19"+r+"-"+o+"-"+l,e=t.substring(14,15))}else if("18"==a){var d=/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X|x)$/,n=t.match(d),r=n[2],o=n[3],l=n[4];this.birthday=new Date(r+"/"+o+"/"+l),this.verifyBirthday(r,o,l,this.birthday)&&(i=r+"-"+o+"-"+l,e=t.substring(16,17))}return this.sex=e%2!=0?1:0,i},verifyBirthday:function(t,i,e,a){var s=new Date,n=s.getFullYear();if(a.getFullYear()==t&&a.getMonth()+1==i&&a.getDate()==e){var r=n-t;return r>=0&&r<=100}return!1},checkParity:function(t){if(t=this.changeFifteenToEighteen(t),"18"==t.length){var i,e=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),a=new Array("1","0","X","9","8","7","6","5","4","3","2"),s=0;for(i=0;i<17;i++)s+=t.substr(i,1)*e[i];return a[s%11]==t.substr(17,1).toLocaleUpperCase()}return!1},changeFifteenToEighteen:function(t){if("15"==t.length){var i,e=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),a=new Array("1","0","X","9","8","7","6","5","4","3","2"),s=0;for(t=t.substr(0,6)+"19"+t.substr(6,t.length-6),i=0;i<17;i++)s+=t.substr(i,1)*e[i];return t+=a[s%11]}return t}}},471:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("app-header"),t._v(" "),e("div",{staticClass:"page-header-main"},[e("br"),t._v(" "),e("div",{staticStyle:{"background-color":"white",padding:"10px"}},t._l(t.options,function(i){return e("label",{staticClass:"mint-radiolist-label",staticStyle:{display:"inline-block"}},[e("span",{staticClass:"mint-radio"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.option,expression:"option"}],staticClass:"mint-radio-input",attrs:{type:"radio"},domProps:{value:i,checked:t._q(t.option,i)},on:{change:function(e){t.option=i}}}),t._v(" "),e("span",{staticClass:"mint-radio-core"})]),t._v(" "),e("span",{staticClass:"mint-radio-label",domProps:{textContent:t._s(i)}})])})),t._v(" "),e("h4",{staticStyle:{"margin-left":"10px"}},[t._v("签约人信息")]),t._v(" "),e("mt-field",{attrs:{label:"身份证号",placeholder:"请输入您的身份证号"},nativeOn:{input:function(i){t.cardListener(i)}},model:{value:t.idcard,callback:function(i){t.idcard=i},expression:"idcard"}}),t._v(" "),e("mt-field",{attrs:{label:"姓名",placeholder:"请输入您的姓名"},model:{value:t.name,callback:function(i){t.name=i},expression:"name"}}),t._v(" "),e("mt-cell",{staticClass:"mint-field",attrs:{title:"性别"}},[e("span",{staticClass:"mint-field-core"},[t._v(t._s(t.sex))])]),t._v(" "),e("mt-cell",{staticClass:"mint-field",attrs:{title:"年龄"}},[e("span",{staticClass:"mint-field-core"},[t._v(t._s(t.age))])]),t._v(" "),e("mt-cell",{staticClass:"mint-field",attrs:{title:"民族","is-link":""},nativeOn:{click:function(i){t.showDialog(1)}}},[e("span",{staticClass:"mint-field-core"},[t._v(t._s(t.nation))])]),t._v(" "),e("br",{directives:[{name:"show",rawName:"v-show",value:"未成年人"!=t.option,expression:"option != '未成年人'"}]}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"未成年人"==t.option,expression:"option == '未成年人'"}]},[e("h4",{staticStyle:{"margin-left":"10px"}},[t._v("监护人信息")]),t._v(" "),e("mt-field",{attrs:{label:"身份证号",placeholder:"请输入监护人的身份证号"},model:{value:t.guardianIdcard,callback:function(i){t.guardianIdcard=i},expression:"guardianIdcard"}}),t._v(" "),e("mt-field",{attrs:{label:"姓名",placeholder:"请输入监护人的姓名"},model:{value:t.guardianName,callback:function(i){t.guardianName=i},expression:"guardianName"}}),t._v(" "),e("mt-cell",{staticClass:"mint-field",attrs:{title:"关系","is-link":""},nativeOn:{click:function(i){t.showDialog(2)}}},[0==t.relationId?e("span",{staticStyle:{color:"gray"}},[t._v("请选择您与签约人的关系")]):t._e(),t._v(" "),e("span",{staticClass:"mint-field-core"},[t._v(t._s(t.relation))])])],1),t._v(" "),e("mt-field",{attrs:{label:"联系电话",placeholder:t.phoneLabel},model:{value:t.phone,callback:function(i){t.phone=i},expression:"phone"}}),t._v(" "),e("mt-field",{attrs:{label:"联系地址",placeholder:t.addressLabel},model:{value:t.address,callback:function(i){t.address=i},expression:"address"}}),t._v(" "),e("div",{staticStyle:{margin:"20px 16px 0 11px"}},[e("mt-button",{attrs:{type:"primary",size:"large"},nativeOn:{click:function(i){return t.next(i)}}},[t._v("下一步")])],1),t._v(" "),e("mt-popup",{staticClass:"mint-popup-4",attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(i){t.popupVisible=i},expression:"popupVisible"}},[e("mt-picker",{attrs:{slots:t.dateSlots,"visible-item-count":5,"show-toolbar":!0},on:{change:t.onChange}},[e("div",{staticClass:"toolbar"},[e("mt-button",{staticClass:"toolbar-left",attrs:{type:"default",size:"small"},nativeOn:{click:function(i){t.popupVisible=!1}}},[t._v("取消")]),t._v(" "),e("mt-button",{staticClass:"toolbar-right",attrs:{type:"default",size:"small"},nativeOn:{click:function(i){return t.confirm(i)}}},[t._v("确认")])],1)])],1)],1)],1)},s=[],n={render:a,staticRenderFns:s};i.a=n}});
//# sourceMappingURL=35.build.js.map