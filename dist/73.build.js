webpackJsonp([73],{193:function(e,t,a){"use strict";function i(e){a(558)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(402),r=a(560),o=a(44),n=i,c=o(s.a,r.a,!1,n,"data-v-3f3ca03e",null);t.default=c.exports},402:function(e,t,a){"use strict";var i=a(12),s=a(11),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e};t.a={data:function(){return{drId:this.$route.query.drId,docName:this.$route.query.docName,orgId:this.$route.query.orgId,deptList:[],drawList:[],scoreList:[],serverTime:"",serverName:"",serverPhone:"",diseaseName:"",desp:"",comment:""}},computed:r({},Object(i.c)(["loginData"]),{userName:function(){var e=this.loginData.userObj;if(e){if(e.nickName)return e.nickName;if(e.userName)return e.userName}return""},bindAccount:function(){var e=this.loginData.userObj;if(e&&e.userAccountList)for(var t=0;t<e.userAccountList.length;t++){var a=e.userAccountList[t];if(a.accountType.value==s.a)return a.account}}}),methods:{changeCheck:function(e){var t=this.drawList[e];t.checked?t.checked=!t.checked:t.checked=!0,this.$set(this.drawList,e,t)},deptDictList:function(){var e=this,t={dictType:2002,upId:0},a=this;this.$store.dispatch("commentDictList",t).then(function(e){a.deptList=e;for(var t=0;t<a.deptList.length;t++)a.scoreList[t]=5}).catch(function(t){e.$toast(t.message)})},drawDictList:function(){var e=this,t={dictType:0,upId:1020101},a=this;this.$store.dispatch("commentDictList",t).then(function(e){a.drawList=e}).catch(function(t){e.$toast(t.message)})},openDatePicker:function(){this.$refs.datePicker.open()},checkEvaList:function(){for(var e=[],t=0;t<this.deptList.length;t++){var a=this.deptList[t],i={evaType:a.dictId.value,evaTypeName:a.dictName,score:this.scoreList[t]};e.push(i)}return e},checkDrawList:function(e){for(var t=[],a=0;a<this.drawList.length;a++){var i=this.drawList[a];if(i.checked){var r={drawObj:this.drId,drawType:i.dictId.value,busiType:s.y,detBusiType:s.w,busiId:e,detBusiId:e};t.push(r)}}return t},handleChange:function(e){this.serverTime=e.format("yyyy-MM-dd")},addComment:function(e){var t=this,a=this,i={busiType:s.x,busiId:e.perId.value,orgId:this.orgId,userTo:this.drId,comment:this.comment,evaDetList:this.checkEvaList(),userFrom:this.loginData.userObj.userId.value};this.$store.dispatch("busiEva",i).then(function(e){a.$toast("操作成功"),a.$router.go(-1)}).catch(function(e){t.$toast(e.message)}).finally(function(){t.$indicator.close()})},addDraw:function(e){var t=this,a={drawList:this.checkDrawList(e.perId.value)};this.$store.dispatch("busiDraw",a).then(function(e){}).catch(function(e){t.$toast(e.message)})},commit:function(){var e=this;if(!this.serverName)return void this.$toast("患者姓名不能为空");if(!this.serverPhone)return void this.$toast("患者手机不能为空");if(!this.serverTime)return void this.$toast("请选择日期");if(!this.desp)return void this.$toast("请填写病情资料");if(0==this.checkDrawList("0").length)return void this.$toast("请选择你对医生的印象");this.$indicator.open();var t=this,a={drId:this.drId,serverName:this.serverName,serverPhone:this.serverPhone,serverTime:this.serverTime,diseaseName:this.diseaseName,desp:this.desp,imgList:[]};this.$store.dispatch("perRegistAdd",a).then(function(e){t.addComment(e),t.addDraw(e)}).catch(function(t){e.$toast(t.message)})}},created:function(){this.deptDictList(),this.drawDictList(),this.serverName=this.userName,this.serverPhone=this.bindAccount,this.serverTime=(new Date).format("yyyy-MM-dd")}}},558:function(e,t,a){var i=a(559);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(1)("6aa6125c",i,!0,{})},559:function(e,t,a){t=e.exports=a(0)(!1),t.push([e.i,"input[data-v-3f3ca03e]{background:#fff}.textarea_box[data-v-3f3ca03e]{padding-top:10px}.flex-b[data-v-3f3ca03e]{border-bottom:1px solid rgba(0,0,0,.08);padding:8px 0}.header[data-v-3f3ca03e]{background-color:#5fbeff;color:#fff;font-size:13px;font-weight:300;padding:6px 16px}.bgv1[data-v-3f3ca03e],.bgv2[data-v-3f3ca03e]{background-color:#fff;padding:0 16px 10px}.bgv2[data-v-3f3ca03e]{margin-top:13px}.line00[data-v-3f3ca03e]{margin-top:0;margin-left:0;color:#ccc}.linecell[data-v-3f3ca03e]{display:inline-block;line-height:55px;width:100%;padding-top:8px;padding-bottom:2px}.title[data-v-3f3ca03e]{font-weight:400;font-size:16px;line-height:25px;padding-bottom:2px;float:left;color:#666}.inputcs[data-v-3f3ca03e]{text-align:right;float:right;font-size:16px;color:#000;border-width:0;margin-top:2px;outline:none}.textA[data-v-3f3ca03e]{border:none;resize:none;font-size:14px;margin-top:10px;width:100%}.img[data-v-3f3ca03e]{height:100px;width:100px;margin-right:5px}.ttt[data-v-3f3ca03e]{font-size:14px;color:#666;height:20px;line-height:15px}.jibing[data-v-3f3ca03e]{display:inline-block;font-size:14px;padding:0 9px;text-align:center;margin-right:15px;line-height:30px;white-space:nowrap;margin-top:10px;margin-bottom:10px}.checked[data-v-3f3ca03e]{color:#0093ff;border:1px solid #0093ff}.unchecked[data-v-3f3ca03e]{color:#222;border:1px solid #ddd}.btn[data-v-3f3ca03e]{font-size:17px;font-weight:300;color:#fffaf0;background-color:#0093ff;height:44px;border-radius:4px;margin-top:25px;width:100%;border-width:0;outline:none}",""])},560:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"header"},[e._v("\n    填写患者报到单，方便医生确认您的身份，申请通过后可以与医生进行线上沟通交流。\n  ")]),e._v(" "),a("div",{staticClass:"bgv1"},[a("div",{staticClass:"flex-b"},[a("span",{staticClass:"title"},[e._v("医生姓名")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.docName,expression:"docName"}],staticClass:"inputcs",attrs:{placeholder:"请输入姓名",disabled:"","placeholder-style":"color:#ccc"},domProps:{value:e.docName},on:{input:function(t){t.target.composing||(e.docName=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"flex-b"},[a("span",{staticClass:"title"},[e._v("患者姓名")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.serverName,expression:"serverName"}],staticClass:"inputcs",attrs:{placeholder:"请输入姓名","placeholder-style":"color:#ccc"},domProps:{value:e.serverName},on:{input:function(t){t.target.composing||(e.serverName=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"flex-b"},[a("span",{staticClass:"title"},[e._v("手机号")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.serverPhone,expression:"serverPhone"}],staticClass:"inputcs",attrs:{placeholder:"请输入手机号",type:"tel","placeholder-style":"color:#ccc"},domProps:{value:e.serverPhone},on:{input:function(t){t.target.composing||(e.serverPhone=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"flex-b"},[a("span",{staticClass:"title"},[e._v("就诊日期")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.serverTime,expression:"serverTime"}],staticClass:"inputcs",attrs:{placeholder:"请选择日期","placeholder-style":"color:#ccc"},domProps:{value:e.serverTime},on:{click:function(t){return t.stopPropagation(),e.openDatePicker(t)},input:function(t){t.target.composing||(e.serverTime=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"flex-b"},[a("span",{staticClass:"title"},[e._v("确诊疾病")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.diseaseName,expression:"diseaseName"}],staticClass:"inputcs",attrs:{placeholder:"未确诊可不填写","placeholder-style":"color:#ccc"},domProps:{value:e.diseaseName},on:{input:function(t){t.target.composing||(e.diseaseName=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"textarea_box"},[a("div",{staticClass:"title"},[e._v("病情资料")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.desp,expression:"desp"}],staticClass:"textA",attrs:{placeholder:"请详细描述您的病情相关资料","placeholder-style":"color:#ccc",clos:"10",rows:"3",warp:"virtual"},domProps:{value:e.desp},on:{input:function(t){t.target.composing||(e.desp=t.target.value)}}}),e._v(" "),e._e(),e._v(" "),e._e()])]),e._v(" "),a("div",{staticClass:"bgv2"},[a("div",{staticStyle:{"text-align":"center","padding-top":"10px","font-size":"15px",color:"#040B1C","font-weight":"600"}},[e._v("评价")]),e._v(" "),e._l(e.deptList,function(t,i){return a("div",{key:i,staticStyle:{display:"flex","align-items":"center","padding-top":"20px"}},[a("span",{staticStyle:{"font-size":"14px","margin-right":"30px"}},[e._v(e._s(t.dictName))]),e._v(" "),a("el-rate",{staticStyle:{display:"inline-block"},attrs:{"allow-half":""},model:{value:e.scoreList[i],callback:function(t){e.$set(e.scoreList,i,t)},expression:"scoreList[index]"}})],1)}),e._v(" "),a("div",{staticStyle:{margin:"20px 0 10px 0"}},e._l(e.drawList,function(t,i){return a("span",{key:i,staticClass:"jibing",class:[t.checked?"checked":"unchecked"],on:{click:function(t){e.changeCheck(i)}}},[e._v(e._s(t.dictName))])})),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],staticClass:"textA",attrs:{placeholder:"写个您对医生的评价",clos:"5",rows:"2",warp:"virtual"},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}}),e._v(" "),a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.commit}},[e._v("提交")])],2),e._v(" "),a("mt-datetime-picker",{ref:"datePicker",attrs:{type:"date","year-format":"{value}年","month-format":"{value}月","date-format":"{value}日"},on:{confirm:e.handleChange}})],1)},s=[],r={render:i,staticRenderFns:s};t.a=r}});
//# sourceMappingURL=73.build.js.map