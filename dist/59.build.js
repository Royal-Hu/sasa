webpackJsonp([59],{183:function(t,i,e){"use strict";function a(t){e(496)}Object.defineProperty(i,"__esModule",{value:!0});var o=e(384),s=e(498),n=e(44),c=a,g=n(o.a,s.a,!1,c,"data-v-38d7f7e8",null);i.default=g.exports},239:function(t,i,e){"use strict";i.a={packPerson:"./static/img/ic_pack_personal.png",packTeam:"./static/img/ic_pack_team.png",packDept:"./static/img/ic_pack_org.png",orgPubImg:"./static/img/ic_org_bg.png",orgImg:"./static/img/ic_org_logo.png",appIconDoctor:"./static/img/app_icon_doctor.png",appIconUser:"./static/img/app_icon.png",topBg:"./static/img/topbg.png",payWx:"./static/img/ic_pay_wechat.png",docMale:"./static/img/ic_doc_male.png",docFeMale:"./static/img/ic_doc_female.png",focusImg:"./static/img/ic_focused.png",unfocusImg:"./static/img/ic_unfocus.png",yuyueImg:"./static/img/ic_yuyue.png",reportImg:"./static/img/ic_report.png",askImg:"./static/img/ic_ask.png",serviceImg:"./static/img/ic_services.png",yuyueGrayImg:"./static/img/ic_yuyue_gray.png",askGrayImg:"./static/img/ic_ask_grey.png",serviceGrayImg:"./static/img/ic_services_grey.png",starImg:"./static/img/ic_rating_all.png",docRectMale:"./static/img/ic_rect_male.png",docRectFeMale:"./static/img/ic_rect_female.png",defaultAva:"./static/img/ic_default_ava.png",appointBg:"./static/img/ic_appoint_bg.png",rulePhoto:"./static/img/ic_rule.png",arrowDown:"./static/img/ic_arrow_down.png",arrowRight:"./static/img/arrow_right.png",arrowR:"./static/img/ic_arrow_right.png",home:"./static/img/home.png",news:"./static/img/news.png",service:"./static/img/service.png",mine:"./static/img/mine.png",doctor:"./static/img/doctor.png",mineBg:"./static/img/mine_bg.png",homeAppoint:"./static/img/home_appoint.png",homeDoctor:"./static/img/home_doctor.png",homeOnline:"./static/img/home_online.png",homeOrder:"./static/img/home_order.png",notice:"./static/img/notice.png",groupUser:"./static/img/ic_group_user.png",groupDoc:"./static/img/ic_group_doc.png",groupDocPatient:"./static/img/ic_group_doc_patient.png",shareImg:"./static/img/share.png",consultationHomeDefault:"./static/img/ic_consulation_home_default.png",consultationHomeSelected:"./static/img/ic_consulation_home_selected.png",consultationMineDefault:"./static/img/ic_consulation_mine_default.png",consultationMineSelected:"./static/img/ic_consulation_mine_selected.png",consultationSmallImg:"./static/img/ic_consultation_small_default.png",consultationBigImg:"./static/img/ic_consultation_big_default.png",consultationWant:"./static/img/ic_want.png",consultationWanted:"./static/img/ic_wanted.png",consultationPaySuccess:"./static/img/ic_sign_success.png",choose:"./static/img/choose.png",chosen:"./static/img/choosen.png",arrowWhiteRight:"./static/img/ic_arrow_right_white.png",consultationMineBg:"./static/img/ic_mine_bg.png",consultationEmpty:"./static/img/ic_empty.png",house_n:"./static/img/house_n.png",house_s:"./static/img/house_s.png",shopping_n:"./static/img/shopping_n.png",shopping_s:"./static/img/shopping_s.png",group_n:"./static/img/group_n.png",group_s:"./static/img/group_s.png",msg_n:"./static/img/msg_n.png",msg_s:"./static/img/msg_s.png",my_n:"./static/img/my_n.png",my_s:"./static/img/my_s.png",focusLookImg:"./static/img/look@2.png",unfocusLookImg:"./static/img/no_look@2.png",assistantHeadImg:"./static/img/assistant_head_img.png",msgTip:"./static/img/msg_tip.png",msgDot:"./static/img/msg_dot.png",systemMsg:"./static/img/system_msg.png",noticeMsg:"./static/img/notice_msg.png",familyDoc:"./static/img/family_doc.png"}},384:function(t,i,e){"use strict";var a=e(12),o=(e(11),e(239),Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t});i.a={data:function(){return{groupid:this.$route.query.groupid,textareaVal:"",msgImg:"",fileList:[],dialogImageUrl:"",dialogVisible:!1,disabled:!1}},props:{topicItem:{}},computed:o({},Object(a.c)(["loginData"])),methods:{beforeUpload:function(t,i){console.log(t,"==file");var e=new FileReader;return e.readAsDataURL(t),e.onload=function(t){var i=t.target.result;console.log(i,"==_file")},!1},beforeUpload1:function(t){},chooseImg:function(t,i){var e=this,a=new FileReader;a.readAsDataURL(t.raw),a.onload=function(t){var i=[];i.push(this.result);for(var a=/^data:image\/(jpeg|png|gif);base64,/,o=0;o<i.length;o++)a.test(i[o])&&e.fileList.push(i[o].replace(a,""))}},handleRemove:function(t,i){var e=this,a=new FileReader;a.readAsDataURL(t.raw),a.onload=function(t){var i=this.result,a=/^data:image\/(jpeg|png|gif);base64,/;a.test(i)&&(i=i.replace(a,""));for(var o=0;o<e.fileList.length;o++)i==e.fileList[o]&&e.fileList.splice(o,1)}},handlePictureCardPreview:function(t,i){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleExceed:function(t,i){this.$toast("最多可上传3张图片哦")},submitRelease:function(){var t=this;if(this.disabled=!0,""==this.textareaVal&&""==this.fileList)return this.$toast("请输入内容"),setTimeout(function(){t.disabled=!1},3e3),!1;this.requestAddtcontent()},requestFileUploadBatch:function(){var t=this,i={fileName:"file",fileExt:"jpg",recType:1004100904,orgId:0,busiId:this.msgImg,fileList:this.fileList};this.$store.dispatch("fileUploadBatch",i).then(function(i){i&&"1"==i.rtnCode&&(t.$toast("发布成功"),setTimeout(function(){t.disabled=!1},3e3),t.$router.go(-1))}).catch(function(i){t.$toast(i.message)})},requestAddtcontent:function(){var t=this,i={userid:this.loginData.userObj.userId.value,groupid:this.groupid,descdata:this.textareaVal};this.$store.dispatch("addtcontent",i).then(function(i){"1"==i.rtnCode&&(""!=t.fileList&&null!=t.fileList&&void 0!=t.fileList?(t.msgImg=i.rtnMsg,t.requestFileUploadBatch()):(t.$toast("发布成功"),setTimeout(function(){t.disabled=!1},3e3),t.$router.go(-1)))}).catch(function(i){t.$toast(i.message)})},blobToBase64:function(t){return new Promise(function(i,e){var a=new FileReader;a.onload=function(t){i(t.target.result)},a.readAsDataURL(t),a.onerror=function(){e(new Error("文件流异常"))}})}},created:function(){}}},496:function(t,i,e){var a=e(497);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(1)("61f20998",a,!0,{})},497:function(t,i,e){i=t.exports=e(0)(!1),i.push([t.i,"[data-v-38d7f7e8] .el-dialog{width:100%;position:absolute;top:10%;margin-top:0!important}[data-v-38d7f7e8] .el-upload-list--picture-card .el-upload-list__item{width:72px;height:72px;float:left}[data-v-38d7f7e8] .el-upload--picture-card{width:72px;height:72px;line-height:80px;border:1px solid rgba(34,34,34,.08)}[data-v-38d7f7e8] .el-upload-list--picture-card .el-upload-list__item-status-label{background:#0076ff;display:none}.main[data-v-38d7f7e8]{position:absolute;width:100%;top:0;bottom:60px;padding:20px 16px;background:#fff;box-sizing:border-box}.textarea[data-v-38d7f7e8]{resize:none;border:none;color:#222;font-size:14px;width:100%;height:75%}.upImg[data-v-38d7f7e8]{position:absolute;bottom:30px;left:16px}.upImg input[data-v-38d7f7e8]{width:72px;height:72px;opacity:0}.up_release[data-v-38d7f7e8]{position:fixed;bottom:0;left:0;width:100%;height:60px;box-shadow:0 0 14px 2px rgba(0,0,0,.08);background:#fff;padding:10px 24px;box-sizing:border-box}.up_release button[data-v-38d7f7e8]{border:none;margin:0;padding:0;display:block;width:100%;height:100%;background:#0076ff;border-radius:20px;color:#fff;text-align:center;font-size:16px;font-weight:600;padding:10px 0;box-sizing:border-box}",""])},498:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticClass:"main"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textareaVal,expression:"textareaVal"}],staticClass:"textarea",attrs:{placeholder:"正文，添加图片或文字","placeholder-style":"color:rgba(34,34,34,.5)"},domProps:{value:t.textareaVal},on:{input:function(i){i.target.composing||(t.textareaVal=i.target.value)}}}),t._v(" "),e("div",{staticClass:"upImg"},[e("el-upload",{attrs:{action:"111","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"before-upload":t.beforeUpload,"auto-upload":!1,"on-change":t.chooseImg,limit:3,"on-exceed":t.handleExceed,multiple:""}},[e("i",{staticClass:"el-icon-plus"})]),t._v(" "),e("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(i){t.dialogVisible=i}}},[e("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),t._v(" "),e("div",{staticClass:"up_release"},[e("button",{attrs:{type:"button",disabled:t.disabled},on:{click:t.submitRelease}},[t._v("发布")])])])},o=[],s={render:a,staticRenderFns:o};i.a=s}});
//# sourceMappingURL=59.build.js.map