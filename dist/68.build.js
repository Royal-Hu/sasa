webpackJsonp([68],{203:function(t,e,i){"use strict";function a(t){i(601)}Object.defineProperty(e,"__esModule",{value:!0});var s=i(414),n=i(603),r=i(44),o=a,p=r(s.a,n.a,!1,o,"data-v-06e4ceba",null);e.default=p.exports},414:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__constant_ConstantConfig_js__=__webpack_require__(11),__WEBPACK_IMPORTED_MODULE_1_vuex__=__webpack_require__(12),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t};__webpack_exports__.a={data:function(){return{appointItem:{},request:{},orderId:this.$route.query.orderId,busiType:1000113,payType:8101104}},filters:{maText:function(t){return"0"==t.value?"上午":"下午"},losslessNumberValue:function(t){return t?t.value:""}},computed:_extends({},Object(__WEBPACK_IMPORTED_MODULE_1_vuex__.c)(["loginData"]),{departName:function(){var t="";return this.appointItem.department&&this.appointItem.department.value==__WEBPACK_IMPORTED_MODULE_0__constant_ConstantConfig_js__.d&&this.appointItem.deptDesp?t=this.appointItem.deptDesp:this.appointItem.departmentName&&(t=this.appointItem.departmentName),t}}),methods:{pay:function(){var t=this,e=this;if(this.orderId)this.$indicator.open(),this.wxPay();else{if(!this.request.subscribeName)return void this.$toast("请输入预约人姓名");if(!this.request.phone)return void this.$toast("请输入预约手机号");this.request.hospital=this.appointItem.hospital,this.request.price=this.appointItem.price.value,this.request.subscribeDay=this.appointItem.date,this.request.subscribeWeek=this.appointItem.week.value,this.request.subscribeMa=this.appointItem.subscribeMa.value,this.request.subscribeWorkTime=this.appointItem.workTime,this.request.docid=this.appointItem.docid.value,this.request.userid=this.loginData.userObj.userId.value,this.$indicator.open(),this.$store.dispatch("userOrderSubmit",this.request).then(function(t){e.orderId=t.orderid.value,e.wxPay()}).catch(function(e){t.$toast(e.message),t.$indicator.close()})}},wxPay:function wxPay(){var _this2=this,vm=this,money=this.appointItem.price.value,userId=this.loginData.userObj.userId.value,drId=this.appointItem.docid.value,orgId=this.appointItem.orgId.value,request={busiId:this.orderId,busiType:this.busiType,desp:"预约",drId:drId,money:money,moneyRmb:money,orgId:orgId,tradeMode:this.payType,userId:userId};this.$store.dispatch("userConsume",request).then(function(data){var request=data.data;request?(request=eval("("+request+")"),vm.invokeWx(request)):(_this2.$indicator.close(),alert("支付成功"),vm.$router.go(-1))}).catch(function(t){_this2.$toast(t.message)}).finally(function(){_this2.$indicator.close()})},onBridgeReady:function(t){var e=this;WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(t){"get_brand_wcpay_request:ok"==t.err_msg?(alert("支付成功"),e.$router.go(-1)):alert("支付失败")})},invokeWx:function(t){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.onBridgeReady(t),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.onBridgeReady(t)),document.attachEvent("onWeixinJSBridgeReady",this.onBridgeReady(t))):this.onBridgeReady(t)}},created:function(){var t=sessionStorage.getItem("appointItem");t&&(this.appointItem=JSON.parse(t),this.request.subscribeName=this.appointItem.subscribeName,this.request.phone=this.appointItem.phone)}}},601:function(t,e,i){var a=i(602);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(1)("53e71ba9",a,!0,{})},602:function(t,e,i){e=t.exports=i(0)(!1),e.push([t.i,".btn[data-v-06e4ceba]{font-size:15px;color:#fffaf0;border-radius:4px;background-color:#0093ff;height:40px;width:90%;margin-left:5%;border-width:0;outline:none}.cell[data-v-06e4ceba]{margin:20px 16px;background-color:#fff;border-radius:4px}.line01[data-v-06e4ceba]{margin:6px 27px 1px;color:#b8b8b8}.line00[data-v-06e4ceba]{margin-top:1px;margin-left:24px;margin-right:24px;color:#b8b8b8}.lab[data-v-06e4ceba]{margin-left:30px;font-size:14px;font-weight:400;color:#b8b8b8}.lab1[data-v-06e4ceba]{font-size:14px;font-weight:400;color:#000;margin-left:24px}.inputcs[data-v-06e4ceba],.lab2[data-v-06e4ceba]{font-size:14px;font-weight:400;color:#000;margin-left:0;line-height:30px;background-color:#f7f7f7}.inputcs[data-v-06e4ceba]{text-align:right;margin-bottom:4px;border-width:0;outline:none}",""])},603:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"cell"},[i("div",{staticStyle:{"padding-top":"10px","text-align":"center"}},[i("span",{staticStyle:{"font-weight":"600","font-size":"16px","line-height":"30px","margin-top":"20px"}},[t._v("预约单")]),t._v(" "),i("br"),t._v(" "),i("span",{staticStyle:{"font-weight":"400","font-size":"15px","line-height":"20px"}},[t._v(t._s(t.appointItem.hospital))])]),t._v(" "),i("hr",{staticClass:"line01",attrs:{align:"center",size:"1 "}}),t._v(" "),i("hr",{staticClass:"line00",attrs:{align:"center",size:"1 "}}),t._v(" "),i("div",{staticStyle:{display:"inline-block","padding-top":"5px",width:"100%"}},[i("span",{staticClass:"lab"},[t._v("就诊医生")]),t._v(" "),i("span",{staticClass:"lab1"},[t._v(t._s(t.appointItem.userName)+"丨"+t._s(t.appointItem.titlesName))])]),t._v(" "),i("div",{staticStyle:{display:"inline-block","padding-top":"5px",width:"100%"}},[i("span",{staticClass:"lab"},[t._v("就诊科室")]),t._v(" "),i("span",{staticClass:"lab1"},[t._v(t._s(t.departName))])]),t._v(" "),i("div",{staticStyle:{display:"inline-block","padding-top":"5px",width:"100%"}},[i("span",{staticClass:"lab"},[t._v("预约时间")]),t._v(" "),i("span",{staticClass:"lab1"},[t._v(t._s(t.appointItem.date)+" "+t._s(t._f("maText")(t.appointItem.subscribeMa))+" "+t._s(t.appointItem.workTime))])]),t._v(" "),i("div",{staticStyle:{display:"inline-block","padding-top":"5px","padding-bottom":"20px",width:"100%"}},[i("span",{staticClass:"lab"},[t._v("预约费用")]),t._v(" "),i("span",{staticClass:"lab1",staticStyle:{color:"red"}},[t._v(t._s(t._f("losslessNumberValue")(t.appointItem.price))+"元")])])]),t._v(" "),i("div",{staticStyle:{margin:"20px 0",padding:"0 16px"}},[i("span",{staticClass:"lab2"},[t._v("预约人姓名")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.request.subscribeName,expression:"request.subscribeName"}],staticClass:"inputcs",staticStyle:{float:"right",color:"#B8B8B8"},attrs:{placeholder:"请输入预约人姓名"},domProps:{value:t.request.subscribeName},on:{input:function(e){e.target.composing||t.$set(t.request,"subscribeName",e.target.value)}}})]),t._v(" "),i("hr",{staticClass:"full-line",attrs:{align:"center",size:"1"}}),t._v(" "),i("div",{staticStyle:{margin:"20px 0",padding:"0 16px"}},[i("span",{staticClass:"lab2"},[t._v("预约手机号")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.request.phone,expression:"request.phone"}],staticClass:"inputcs",staticStyle:{float:"right",color:"#B8B8B8"},attrs:{type:"tel",placeholder:"请输入预约手机号"},domProps:{value:t.request.phone},on:{input:function(e){e.target.composing||t.$set(t.request,"phone",e.target.value)}}})]),t._v(" "),i("hr",{staticClass:"full-line",attrs:{align:"center",size:"1"}}),t._v(" "),i("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.pay}},[t._v("支付")])])},s=[],n={render:a,staticRenderFns:s};e.a=n}});
//# sourceMappingURL=68.build.js.map